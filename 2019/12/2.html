<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Advent of Code</title>
        <link rel="stylesheet" href="../../style.css">
    </head>
    <body>
        <p class="answer"></p>

        <script type="module">
            import FileReader from '../../classes/FileReader.js';
            import Parser from './Parser.js';

            const fileReader = new FileReader('./data.txt', new Parser());
            const {positions} = await fileReader.parse();

            // Create moon objects
            const moons = positions.map(position => ({
                position,
                velocity: {x: 0, y: 0, z: 0},
                others: [],
            }));

            // Link moons to each other
            for (let i = 0; i < moons.length; i++) {
                for (const otherMoon of moons.slice(i + 1)) {
                    moons[i].others.push(otherMoon);
                    otherMoon.others.push(moons[i]);
                }
            }

            /*
            N-Body function generated by OpenAI

            function nBody(bodies) {
              var G = 6.67e-11;
              var dt = 1e-3;
              var n = bodies.length;
              var i, j, k;
              for (i = 0; i < n; i++) {
                var body = bodies[i];
                body.ax = body.ay = 0;
                for (j = 0; j < n; j++) {
                  if (i == j) continue;
                  var other = bodies[j];
                  var dx = other.x - body.x;
                  var dy = other.y - body.y;
                  var r2 = dx*dx + dy*dy;
                  var r = Math.sqrt(r2);
                  var f = G * body.m * other.m / r2;
                  body.ax += f * dx / r;
                  body.ay += f * dy / r;
                }
              }
              for (i = 0; i < n; i++) {
                var body = bodies[i];
                body.vx += body.ax * dt;
                body.vy += body.ay * dt;
                body.x += body.vx * dt;
                body.y += body.vy * dt;
              }
            }
            */

            // document.querySelector('.answer').innerText =
        </script>
    </body>
</html>
